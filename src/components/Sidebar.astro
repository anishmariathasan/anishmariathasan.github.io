---
// src/components/Sidebar.astro
// This component renders a fixed sidebar with profile info and navigation links
---

<aside class="sidebar fixed top-0 left-0 h-full w-64 bg-gray-800/80 backdrop-blur-sm flex flex-col items-center p-6 border-r border-gray-700/50 shadow-xl z-20">
    <div class="profile-section flex flex-col items-center mb-8">
      <!-- Profile image -->
      <div class="profile-image-container mb-4">
        <div class="profile-image-circle w-28 h-28 rounded-full overflow-hidden border-2 border-teal-400 shadow-lg">
          <!-- Replace with your actual profile image or placeholder -->
          <img 
            src="/profile-image.jpg" 
            alt="Anish Mariathasan" 
            class="w-full h-full object-cover"
            onerror="this.src='/profile-placeholder.svg'; this.onerror=null;"
          />
        </div>
      </div>
      
      <!-- Name and title -->
      <h2 class="text-xl font-bold text-white text-center">Anish Mariathasan</h2>
      <p class="text-base text-gray-300 mb-4 text-center">Biomedical Engineering @ Imperial College London</p>
      
      <!-- Social links -->
      <div class="social-links flex space-x-4 mb-6">
        <a 
          href="https://github.com/anishmariathasan" 
          target="_blank" 
          rel="noopener noreferrer"
          class="social-icon"
          aria-label="GitHub"
        >
          <svg class="w-6 h-6 text-gray-300 hover:text-teal-400 transition-colors duration-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 .5C5.37.5 0 5.78 0 12.292c0 5.211 3.438 9.63 8.205 11.188.6.111.82-.254.82-.567 0-.28-.01-1.022-.015-2.005-3.338.711-4.042-1.582-4.042-1.582-.546-1.361-1.335-1.725-1.335-1.725-1.087-.731.084-.716.084-.716 1.205.082 1.838 1.215 1.838 1.215 1.07 1.803 2.809 1.282 3.495.981.108-.763.417-1.282.76-1.577-2.665-.295-5.466-1.309-5.466-5.827 0-1.287.465-2.339 1.235-3.164-.135-.298-.54-1.497.105-3.121 0 0 1.005-.316 3.3 1.209.96-.262 1.98-.392 3-.398 1.02.006 2.04.136 3 .398 2.28-1.525 3.285-1.209 3.285-1.209.645 1.624.24 2.823.12 3.121.765.825 1.23 1.877 1.23 3.164 0 4.53-2.805 5.527-5.475 5.817.42.354.81 1.077.81 2.182 0 1.578-.015 2.846-.015 3.229 0 .309.21.678.825.56C20.565 21.917 24 17.495 24 12.292 24 5.78 18.627.5 12 .5z"/>
          </svg>
        </a>
        <a 
          href="https://www.linkedin.com/in/anishmariathasan" 
          target="_blank" 
          rel="noopener noreferrer"
          class="social-icon"
          aria-label="LinkedIn"
        >
          <svg class="w-6 h-6 text-gray-300 hover:text-teal-400 transition-colors duration-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
          </svg>
        </a>
        <a 
          href="mailto:anish.mariathasan22@imperial.ac.uk" 
          class="social-icon"
          aria-label="Email"
        >
          <svg class="w-6 h-6 text-gray-300 hover:text-teal-400 transition-colors duration-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
            <polyline points="22,6 12,13 2,6"></polyline>
          </svg>
        </a>
      </div>
    </div>
    
    <!-- Navigation Links -->
    <nav class="sidebar-nav w-full">
      <ul class="space-y-2">
        <li>
          <a href="/" class="nav-link block w-full py-2 px-4 rounded hover:bg-gray-700/50 transition-colors duration-200 cursor-pointer">
            home
          </a>
        </li>
        <li>
          <a href="/#about" class="nav-link block w-full py-2 px-4 rounded hover:bg-gray-700/50 transition-colors duration-200 cursor-pointer">
            about
          </a>
        </li>
        <li>
          <a href="/#projects" class="nav-link block w-full py-2 px-4 rounded hover:bg-gray-700/50 transition-colors duration-200 cursor-pointer">
            projects
          </a>
        </li>
        <li>
          <a href="/cv" class="nav-link block w-full py-2 px-4 rounded hover:bg-gray-700/50 transition-colors duration-200 cursor-pointer">
            cv
          </a>
        </li>
      </ul>
    </nav>
    
    <div class="mt-auto text-xs text-gray-500 pt-4">
      Â© {new Date().getFullYear()} Anish Mariathasan
    </div>
  </aside>
  
  <style>
    .sidebar {
      transition: transform 0.3s ease;
    }
    
    .social-icon {
      transition: transform 0.2s ease;
    }
    
    .social-icon:hover {
      transform: translateY(-2px);
    }
    
    .nav-link.active {
      background-color: rgba(20, 184, 166, 0.2);
      border-left: 3px solid rgb(20, 184, 166);
    }

    .nav-link {
      font-size: 1.125rem; /* Increased font size for navigation links */
    }
    
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
      }
      
      .sidebar.open {
        transform: translateX(0);
      }
    }
  </style>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const currentPath = window.location.pathname;
      const currentHash = window.location.hash; // e.g. "#about", "" if none
  
      document.querySelectorAll('.nav-link').forEach(link => {
        // Use the browser's URL parser to split href into path & hash
        const url = new URL((link as HTMLAnchorElement).href, window.location.origin);
  
        if (
          url.pathname === currentPath && (
            url.hash === currentHash ||   // exact hash match
            (url.hash === '' && currentHash === '')  // both "no hash"
          )
        ) {
          link.classList.add('active');
        } else {
          link.classList.remove('active');
        }
  
        // Optional: when you click, immediately toggle the class (before the browser scrolls)
        link.addEventListener('click', () => {
          document.querySelectorAll('.nav-link.active').forEach(el => el.classList.remove('active'));
          link.classList.add('active');
        });
      });
    });
  </script>
